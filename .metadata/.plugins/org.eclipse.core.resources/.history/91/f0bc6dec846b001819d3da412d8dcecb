#include "msp.h"
#include "gpio.h"
#include "keypad.h"
#include "interrupt.h"
#include "timer.h"
#include "delay.h"
/**
 * main.c
 */
void main(void)
{

    P2->DIR |= BIT4;
    P2->SEL0 |= BIT4;


    initClock();            //enable HFXT @ 48MHZ

    timerStruct timer;
    timer.channel = TIM0;
    timer.divide = DIV8;
    timer.mode = UPDN;
    timer.source = SMCLK;
    timer.intccr = CCR0;
    TIMER_A0->EX0 = TIMER_A_EX0_TAIDEX_6;
    TIMER_A0->CCR[0] = 8580;
    TIMER_A0->CCR[1] = 1;
    TIMER_A0->CCTL[1] |= TIMER_A_CCTLN_OUTMOD_2;
    timer_init(&timer);


    initKeypad();           //init keypad


    while(1){

        TIMER_A0->CCR[1] = 470; //825 max, 470 min
        delay_ms(1000);
        TIMER_A0->CCR[1] = 825;
        delay_ms(1000);

    }

}
